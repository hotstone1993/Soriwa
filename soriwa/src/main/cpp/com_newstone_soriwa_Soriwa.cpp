/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
#include <string>
/* Header for class com_newstone_soriwa_Soriwa */
#include "include/com_newstone_soriwa_Soriwa.h"
#include "include/Soriwa.h"
#include "common_header.h"

const char* const INSTANCE = "instance";

#ifdef __cplusplus
extern "C" {
#endif

Soriwa* getInstance(JNIEnv* env, const jobject& obj) {
    jclass cls = env->GetObjectClass(obj);
    jfieldID id = env->GetFieldID(cls, INSTANCE, "J");
    jlong instancePointer = env->GetLongField(obj, id);
    return reinterpret_cast<Soriwa*>(instancePointer);
}

JNIEXPORT void JNICALL Java_com_newstone_soriwa_Soriwa_init(JNIEnv *env, jobject obj) {
    Soriwa* newInstance = new Soriwa();
    newInstance->init();

    jclass cls = env->GetObjectClass(obj);
    jfieldID id = env->GetFieldID(cls, INSTANCE, "J");
    env->SetLongField(obj, id, reinterpret_cast<jlong>(newInstance));
}

JNIEXPORT void JNICALL Java_com_newstone_soriwa_Soriwa_deinit(JNIEnv *env, jobject obj) {
    Soriwa* instance = getInstance(env, obj);
    instance->deinit();
    delete instance;

    jclass cls = env->GetObjectClass(obj);
    jfieldID id = env->GetFieldID(cls, INSTANCE, "J");
    env->SetLongField(obj, id, 0);
}

JNIEXPORT jint JNICALL Java_com_newstone_soriwa_Soriwa_addAudio(JNIEnv *env, jobject obj, jobject config, jstring filePath) {
    int result = 0;
    Soriwa* instance = getInstance(env, obj);
//    jclass cls = env->GetObjectClass(config);
  //  jfieldID id = env->GetFieldID(cls, "config1", "I");

    Configuration* c = new Configuration();
    std::string path = env->GetStringUTFChars(filePath, NULL);

    c->sharingMode = 0;
    c->playMode = 1;
    instance->addAudio(c, path);
    return result;
}

JNIEXPORT jint JNICALL Java_com_newstone_soriwa_Soriwa_deleteAudioById(JNIEnv *env, jobject obj, jint id) {
    int result = 0;
    Soriwa* instance = getInstance(env, obj);
    result = instance->deleteAudioById(id);
    return result;
}

JNIEXPORT jint JNICALL Java_com_newstone_soriwa_Soriwa_play(JNIEnv *env, jobject obj, jint id) {
    int result = 0;
    Soriwa* instance = getInstance(env, obj);
    result = instance->play(id);
    return result;
}

JNIEXPORT jint JNICALL Java_com_newstone_soriwa_Soriwa_stop(JNIEnv *env, jobject obj, jint id) {
    int result = 0;
    Soriwa* instance = getInstance(env, obj);
    result = instance->stop(id);
    return result;
}
#ifdef __cplusplus
}
#endif